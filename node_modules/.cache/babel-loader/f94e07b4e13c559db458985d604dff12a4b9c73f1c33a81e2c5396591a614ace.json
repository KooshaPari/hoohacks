{"ast":null,"code":"import HealthDataController from'../controllers/HealthDataController';/**\n * WeeklySummaryPresenter - Handles presenting data for the Weekly Summary view\n */class WeeklySummaryPresenter{constructor(){this.healthDataController=new HealthDataController();}/**\n   * Get weekly summary data\n   * @returns {Object} - Weekly summary data\n   */getWeeklySummaryData(){const endDate=new Date();const startDate=new Date();startDate.setDate(endDate.getDate()-7);const summary=this.healthDataController.getHealthSummary(startDate,endDate);const narrative=this.healthDataController.getWeeklyNarrative();// Get daily data for charts\nconst sleepData=this.healthDataController.healthData.getHealthMetricsInRange('sleep',startDate,endDate);const activityData=this.healthDataController.healthData.getHealthMetricsInRange('activity',startDate,endDate);const journalEntries=this.healthDataController.healthData.getJournalEntriesInRange(startDate,endDate);// Format chart data\nconst chartData={labels:this.getDayLabels(startDate,endDate),sleep:this.formatDailyData(sleepData,'duration'),steps:this.formatDailyData(activityData,'steps'),mood:this.formatDailyData(journalEntries,'mood'),energy:this.formatDailyData(journalEntries,'energy')};return{summary,narrative,chartData};}/**\n   * Get day labels for chart\n   * @param {Date} startDate - Start date\n   * @param {Date} endDate - End date\n   * @returns {Array} - Array of day labels\n   */getDayLabels(startDate,endDate){const days=[];const currentDate=new Date(startDate);while(currentDate<=endDate){days.push(this.formatDateLabel(currentDate));currentDate.setDate(currentDate.getDate()+1);}return days;}/**\n   * Format daily data for charts\n   * @param {Array} data - Array of data entries\n   * @param {String} valueKey - The key to extract values from\n   * @returns {Array} - Formatted daily values\n   */formatDailyData(data,valueKey){const dayValues={};// Initialize with empty values\nconst days=this.getDayLabels(new Date(new Date().setDate(new Date().getDate()-7)),new Date());days.forEach(day=>{dayValues[day]=null;});// Fill in actual values\ndata.forEach(item=>{const date=this.formatDateLabel(new Date(item.timestamp));if(dayValues[date]!==undefined){// For journal entries, use the value directly\nif(valueKey==='mood'||valueKey==='energy'){dayValues[date]=item[valueKey];}else{// For health metrics, access the property\ndayValues[date]=item[valueKey];}}});return Object.values(dayValues);}/**\n   * Format date as a label (e.g., \"Mon 3/29\")\n   * @param {Date} date - The date to format\n   * @returns {String} - Formatted date label\n   */formatDateLabel(date){const days=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];return`${days[date.getDay()]} ${date.getMonth()+1}/${date.getDate()}`;}}export default WeeklySummaryPresenter;","map":{"version":3,"names":["HealthDataController","WeeklySummaryPresenter","constructor","healthDataController","getWeeklySummaryData","endDate","Date","startDate","setDate","getDate","summary","getHealthSummary","narrative","getWeeklyNarrative","sleepData","healthData","getHealthMetricsInRange","activityData","journalEntries","getJournalEntriesInRange","chartData","labels","getDayLabels","sleep","formatDailyData","steps","mood","energy","days","currentDate","push","formatDateLabel","data","valueKey","dayValues","forEach","day","item","date","timestamp","undefined","Object","values","getDay","getMonth"],"sources":["/Users/kooshapari/temp-PRODVERCEL/hoohacks/tester/src/presenters/WeeklySummaryPresenter.js"],"sourcesContent":["import HealthDataController from '../controllers/HealthDataController';\n\n/**\n * WeeklySummaryPresenter - Handles presenting data for the Weekly Summary view\n */\nclass WeeklySummaryPresenter {\n  constructor() {\n    this.healthDataController = new HealthDataController();\n  }\n\n  /**\n   * Get weekly summary data\n   * @returns {Object} - Weekly summary data\n   */\n  getWeeklySummaryData() {\n    const endDate = new Date();\n    const startDate = new Date();\n    startDate.setDate(endDate.getDate() - 7);\n    \n    const summary = this.healthDataController.getHealthSummary(startDate, endDate);\n    const narrative = this.healthDataController.getWeeklyNarrative();\n    \n    // Get daily data for charts\n    const sleepData = this.healthDataController.healthData.getHealthMetricsInRange('sleep', startDate, endDate);\n    const activityData = this.healthDataController.healthData.getHealthMetricsInRange('activity', startDate, endDate);\n    const journalEntries = this.healthDataController.healthData.getJournalEntriesInRange(startDate, endDate);\n    \n    // Format chart data\n    const chartData = {\n      labels: this.getDayLabels(startDate, endDate),\n      sleep: this.formatDailyData(sleepData, 'duration'),\n      steps: this.formatDailyData(activityData, 'steps'),\n      mood: this.formatDailyData(journalEntries, 'mood'),\n      energy: this.formatDailyData(journalEntries, 'energy')\n    };\n    \n    return {\n      summary,\n      narrative,\n      chartData\n    };\n  }\n\n  /**\n   * Get day labels for chart\n   * @param {Date} startDate - Start date\n   * @param {Date} endDate - End date\n   * @returns {Array} - Array of day labels\n   */\n  getDayLabels(startDate, endDate) {\n    const days = [];\n    const currentDate = new Date(startDate);\n    \n    while (currentDate <= endDate) {\n      days.push(this.formatDateLabel(currentDate));\n      currentDate.setDate(currentDate.getDate() + 1);\n    }\n    \n    return days;\n  }\n\n  /**\n   * Format daily data for charts\n   * @param {Array} data - Array of data entries\n   * @param {String} valueKey - The key to extract values from\n   * @returns {Array} - Formatted daily values\n   */\n  formatDailyData(data, valueKey) {\n    const dayValues = {};\n    \n    // Initialize with empty values\n    const days = this.getDayLabels(\n      new Date(new Date().setDate(new Date().getDate() - 7)),\n      new Date()\n    );\n    days.forEach(day => {\n      dayValues[day] = null;\n    });\n    \n    // Fill in actual values\n    data.forEach(item => {\n      const date = this.formatDateLabel(new Date(item.timestamp));\n      if (dayValues[date] !== undefined) {\n        // For journal entries, use the value directly\n        if (valueKey === 'mood' || valueKey === 'energy') {\n          dayValues[date] = item[valueKey];\n        } else {\n          // For health metrics, access the property\n          dayValues[date] = item[valueKey];\n        }\n      }\n    });\n    \n    return Object.values(dayValues);\n  }\n\n  /**\n   * Format date as a label (e.g., \"Mon 3/29\")\n   * @param {Date} date - The date to format\n   * @returns {String} - Formatted date label\n   */\n  formatDateLabel(date) {\n    const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n    return `${days[date.getDay()]} ${date.getMonth() + 1}/${date.getDate()}`;\n  }\n}\n\nexport default WeeklySummaryPresenter;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}